<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>awoken-bible-reference</title>
	<meta name="description" content="Documentation for awoken-bible-reference">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">awoken-bible-reference</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>awoken-bible-reference</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#awoken-bible-reference--" id="awoken-bible-reference--" style="color: inherit; text-decoration: none;">
					<h1>Awoken Bible Reference <a href="https://travis-ci.org/awoken-bible/reference"><img src="https://travis-ci.org/awoken-bible/reference.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/github/awoken-bible/reference?branch=master"><img src="https://coveralls.io/repos/github/awoken-bible/reference/badge.svg?branch=master" alt="Coverage Status"></a></h1>
				</a>
				<p><em>Bible verse reference parsing, formating and manipulation</em></p>
				<p><a href="https://awoken-bible.github.io/reference/index.html">Click for public API reference docs</a>.</p>
				<a href="#quick-start-guide" id="quick-start-guide" style="color: inherit; text-decoration: none;">
					<h2>Quick Start Guide</h2>
				</a>
				<a href="#node-js" id="node-js" style="color: inherit; text-decoration: none;">
					<h3>Node JS</h3>
				</a>
				<p>To use the default versification scheme, simple import the libary and use the global <a href="https://awoken-bible.github.io/reference/index.html">API functions</a>.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> AwokenRef <span class="hljs-keyword">from</span> <span class="hljs-string">'awoken-bible-reference'</span>;

<span class="hljs-keyword">let</span> vref = AwokenRef.parseOrThrow(<span class="hljs-string">'Genesis 1'</span>);
<span class="hljs-keyword">if</span>(AwokenRef.countVerses(vref) &gt; <span class="hljs-number">10</span>)){
    vref = AwokenRef.firstNVerses(vref, <span class="hljs-number">10</span>);
}
vref = AwokenRef.getIntersection(vref, AwokenRef.parseOrThrow(<span class="hljs-string">'GEN 1 v6,9-20'</span>));

<span class="hljs-comment">// Print as human readable verse reference (IE: "Genesis 1:6,9-10")</span>
<span class="hljs-built_in">console</span>.log(AwokenRef.format(vref));

<span class="hljs-comment">// Print as url encodable reference (IE: "gen1v6,9-10")</span>
<span class="hljs-built_in">console</span>.log(AwokenRef.format(vref, { url: <span class="hljs-literal">true</span> }));

<span class="hljs-comment">// Inspect the object, will yield:</span>
<span class="hljs-comment">// [ { book: 'GEN', chapter: 1, verse: 6 },</span>
<span class="hljs-comment">//   { is_range : true,</span>
<span class="hljs-comment">//     start    : { book: 'GEN', chapter: 1, verse:  9 },</span>
<span class="hljs-comment">//     end      : { book: 'GEN', chapter: 1, verse: 10 },</span>
<span class="hljs-comment">//   }</span>
<span class="hljs-comment">// ]</span>
<span class="hljs-built_in">console</span>.dir(vref);</code></pre>
				<p>Non-standard versification schemes can be used by instead creating an instance of the library. This allows support to be added for the Apocrypha, or translations that use a different split of verses per chapter.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> __AwokenRef__ <span class="hljs-keyword">from</span> <span class="hljs-string">'awoken-bible-reference'</span>;

<span class="hljs-keyword">const</span> AwokenRef = <span class="hljs-keyword">new</span> __AwokenRef__(my_versificaton);

<span class="hljs-keyword">let</span> vref = AwokenRef.parse(<span class="hljs-string">'MyBook 100:999'</span>);</code></pre>
				<p>The full list of methods on the <code>AwokenRef</code> object can be found in the <a href="https://awoken-bible.github.io/reference/index.html">API docs</a>.</p>
				<a href="#browser" id="browser" style="color: inherit; text-decoration: none;">
					<h3>Browser</h3>
				</a>
				<p>If using plain javascript in the browser with no build-system to bundle your dependencies, you may simply reference the file found in <code>./dist.browser/awoken-ref.js</code>.</p>
				<p>This will create a global &quot;AwokenRef` variable, which can be used as both an instance of the library, and a constructor to create new instances with non-default versification schemes.</p>
				<pre><code class="language-html">
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"[path]/awoken-ref.js"</span>/&gt;</span><span class="handlebars"><span class="xml">


<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
    <span class="hljs-keyword">var</span> refs = AwokenRef.parseOrThrow(<span class="hljs-string">'Tobit 1.1'</span>); <span class="hljs-comment">// error!</span>

    <span class="hljs-keyword">var</span> lib = <span class="hljs-keyword">new</span> AwokenRef(myCustomVersificationWithApocrytha);
    <span class="hljs-keyword">var</span> myRefs = lib.parseOrThrow(<span class="hljs-string">'Tobit 1.1'</span>); <span class="hljs-comment">// success!</span>
</span></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
				<a href="#type-representations" id="type-representations" style="color: inherit; text-decoration: none;">
					<h1>Type Representations</h1>
				</a>
				<a href="#bible-verses" id="bible-verses" style="color: inherit; text-decoration: none;">
					<h2>Bible Verses</h2>
				</a>
				<p><code>awoken-bible-reference</code> can represent (and convert between) the following representations of a Bible verse:</p>
				<table>
					<tr>
						<th>What</th>
						<th>Typescript Type</th>
						<th>Example 1</th>
						<th>Example 2</th>
					</tr>
					<tr>
						<td>Human readable string</td>
						<td>string</td>
						<td>Genesis 1:1</td>
						<td>Revelation 22:21</td>
					</tr>
					<tr>
						<td>Verse Index</td>
						<td>number</td>
						<td>0</td>
						<td>33021</td>
					</tr>
					<tr>
						<td>JSON</td>
						<td>
							<pre><code class="language-typescript"><span class="hljs-keyword">interface</span> BibleVerse {
  book    : <span class="hljs-built_in">string</span>,
  chapter : <span class="hljs-built_in">number</span>,
  verse   : <span class="hljs-built_in">number</span>,
}</code></pre>
						</td>
						<td>
							<pre><code class="language-json">{
  <span class="hljs-attr">"book"</span>    : <span class="hljs-string">"GEN"</span>,
  <span class="hljs-attr">"chapter"</span> : <span class="hljs-number">1</span>,
  <span class="hljs-attr">"verse"</span>   : <span class="hljs-number">1</span>,
}</code></pre>
						</td>
						<td>
							<pre><code class="language-json">{
  <span class="hljs-attr">"book"</span>    : <span class="hljs-string">"REV"</span>,
  <span class="hljs-attr">"chapter"</span> : <span class="hljs-number">22</span>,
  <span class="hljs-attr">"verse"</span>   : <span class="hljs-number">21</span>,
}</code></pre>
						</td>
					</tr>
				</table>
				<blockquote>
					<p>Note that the verse index representation should be avoided unless you are sure that all translations you care about utalize the exact same <a href="https://en.wikipedia.org/wiki/Chapters_and_verses_of_the_Bible">versification scheme</a>. While it is useful for assigning unique IDs and computing offsets etc, it should probably not be used as a portable data exchange format.</p>
				</blockquote>
				<p>The <code>book</code> field is always a 3 character mix of upper case letters and digits, as per the <a href="https://ubsicap.github.io/usfm/identification/books.html">USFM specification</a>.</p>
				<a href="#bibleranges" id="bibleranges" style="color: inherit; text-decoration: none;">
					<h2>BibleRanges</h2>
				</a>
				<p>BibleRanges are represented by an object of the form:</p>
				<pre><code class="language-typescript"><span class="hljs-comment">/** Representation of continous block of verses */</span>
<span class="hljs-keyword">interface</span> BibleRange {
    is_range : <span class="hljs-literal">true</span>,
    start    : BibleVerse,
    end      : BibleVerse,
};</code></pre>
				<a href="#mixed-sets" id="mixed-sets" style="color: inherit; text-decoration: none;">
					<h2>Mixed Sets</h2>
				</a>
				<p>Note that most API function can take either <code>BibleRange</code> or <code>BibleVerse</code> objects (or lists thereof), and thus the <code>is_range</code> field can be used to easily distinguish the types from one another.</p>
				<p>The following union type is also exported for convenience:</p>
				<pre><code class="language-typescript"><span class="hljs-comment">/** Generic reference to verse or range */</span>
<span class="hljs-keyword">type</span> BibleRef = BibleVerse | BibleRange;</code></pre>
				<a href="#overview-of-functionality" id="overview-of-functionality" style="color: inherit; text-decoration: none;">
					<h1>Overview of Functionality</h1>
				</a>
				<p>API methods include functionality to:</p>
				<ul>
					<li>Parse partial references, ranges, and comma separated lists there of:<ul>
							<li><code>Genesis 1:1-10,12, 2:14</code></li>
							<li><code>EXO 3:1 - DEU 4:1</code></li>
							<li><code>Matt 1; Luke3.16; Mark 1 v 2-3,5</code></li>
						</ul>
					</li>
					<li>Generate verbose human readable reference strings, and compact URL encodable equivalents<ul>
							<li><code>Genesis 10 v6-10</code> vs <code>gen10v6-10</code></li>
							<li><code>Song of Solomon</code> vs <code>sng</code></li>
						</ul>
					</li>
					<li>Validate and fix references, including out of range chapters and verses, and inverted ranges:<ul>
							<li><code>validate({book: &#39;GEN&#39;, chapter: 51, verse: 1})</code><br/>
								becomes<br/>
							<code>{ message: &quot;Genesis has only 50 chapters&quot;, got: 51, max_value: 50, ... }</code></li>
							<li><code>fixErrors({book: &#39;GEN&#39;, chapter: 51, verse: 1})</code><br/>
								becomes<br/>
							<code>{book: &#39;GEN&#39;, chapter: 50, verse: 26}</code></li>
						</ul>
					</li>
					<li>Sorting a list of references</li>
					<li>Counting the number of verses in a list of <code>BibleRef</code> instances</li>
					<li>Iterating/Splitting by book/chapter/verse</li>
					<li>Truncating a list of <code>BibleRef</code>s to contain only the first N verses (useful for pagination, or short previews of a longer text)</li>
					<li>Combining/Simplifying ranges, as well as finding the intersection/union of ranges</li>
				</ul>
				<p>For a full list of the exported functions and data types, see the <a href="https://awoken-bible.github.io/reference/index.html">generated typedoc API reference</a>.</p>
				<a href="#build-targets" id="build-targets" style="color: inherit; text-decoration: none;">
					<h1>Build Targets</h1>
				</a>
				<p>The published copy of this library contains two output targets, which to use in your project depends on your use case.</p>
				<ul>
					<li><code>dist/</code> contains a set of js files representing esmodules, to be loaded by other nodejs projects, react apps, etc<ul>
							<li>This folder contains <code>.d.ts</code> files to allow type infomation to be loaded in other typescript projects, however the js files can equally well be loaded in javascript based projects</li>
							<li>This is built using the typescript compiler only!</li>
						</ul>
					</li>
					<li><code>dist.browser/awoken-ref.js</code> is a minified and self-contained bundle containing all the code required to run in the browser. Adding a <code>&lt;script src=&quot;[path]/awoken-ref.js&quot;/&gt;</code> tag to your html will create a global &quot;AwokenRef&quot; variable with attached functions using the default versification, or you can create a new instance with <code>new AwokenRef(customVersification)</code><ul>
							<li>This is built using webpack/babel</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum">
						<a href="enums/errkind.html" class="tsd-kind-icon">Err<wbr>Kind</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/biblerange.html" class="tsd-kind-icon">Bible<wbr>Range</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/biblereflib.html" class="tsd-kind-icon">Bible<wbr>Ref<wbr>Lib</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/bibleverse.html" class="tsd-kind-icon">Bible<wbr>Verse</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/formatoptions.html" class="tsd-kind-icon">Format<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/parseresultfailure.html" class="tsd-kind-icon">Parse<wbr>Result<wbr>Failure</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/parseresultsuccess.html" class="tsd-kind-icon">Parse<wbr>Result<wbr>Success</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/refsbybook.html" class="tsd-kind-icon">Refs<wbr>ByBook</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/refsbychapter.html" class="tsd-kind-icon">Refs<wbr>ByChapter</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#bibleref" class="tsd-kind-icon">Bible<wbr>Ref</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#biblereflibconstructor" class="tsd-kind-icon">Bible<wbr>Ref<wbr>Lib<wbr>Constructor</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#formatarg" class="tsd-kind-icon">Format<wbr>Arg</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#formatpreset" class="tsd-kind-icon">Format<wbr>Preset</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#parseresult" class="tsd-kind-icon">Parse<wbr>Result</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#validationerror" class="tsd-kind-icon">Validation<wbr>Error</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#combineranges" class="tsd-kind-icon">combine<wbr>Ranges</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#contains" class="tsd-kind-icon">contains</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#countverses" class="tsd-kind-icon">count<wbr>Verses</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#createversification" class="tsd-kind-icon">create<wbr>Versification</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#firstnverses" class="tsd-kind-icon">firstNVerses</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#format" class="tsd-kind-icon">format</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#fromvidx" class="tsd-kind-icon">from<wbr>Vidx</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getdifference" class="tsd-kind-icon">get<wbr>Difference</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getintersection" class="tsd-kind-icon">get<wbr>Intersection</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getunion" class="tsd-kind-icon">get<wbr>Union</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#groupbybook" class="tsd-kind-icon">group<wbr>ByBook</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#groupbychapter" class="tsd-kind-icon">group<wbr>ByChapter</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#groupbylevel" class="tsd-kind-icon">group<wbr>ByLevel</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#indexof" class="tsd-kind-icon">index<wbr>Of</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#intersects" class="tsd-kind-icon">intersects</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#isfullbook" class="tsd-kind-icon">is<wbr>Full<wbr>Book</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#isfullchapter" class="tsd-kind-icon">is<wbr>Full<wbr>Chapter</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#iteratebybook" class="tsd-kind-icon">iterate<wbr>ByBook</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#iteratebychapter" class="tsd-kind-icon">iterate<wbr>ByChapter</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#iteratebyverse" class="tsd-kind-icon">iterate<wbr>ByVerse</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#makerange" class="tsd-kind-icon">make<wbr>Range</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#nextbook" class="tsd-kind-icon">next<wbr>Book</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#nextchapter" class="tsd-kind-icon">next<wbr>Chapter</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#parse" class="tsd-kind-icon">parse</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#parsebookname" class="tsd-kind-icon">parse<wbr>Book<wbr>Name</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#parseorthrow" class="tsd-kind-icon">parse<wbr>OrThrow</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#previousbook" class="tsd-kind-icon">previous<wbr>Book</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#previouschapter" class="tsd-kind-icon">previous<wbr>Chapter</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#repair" class="tsd-kind-icon">repair</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#sort" class="tsd-kind-icon">sort</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#splitbybook" class="tsd-kind-icon">split<wbr>ByBook</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#splitbychapter" class="tsd-kind-icon">split<wbr>ByChapter</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#splitbyverse" class="tsd-kind-icon">split<wbr>ByVerse</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#tovidx" class="tsd-kind-icon">to<wbr>Vidx</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#validate" class="tsd-kind-icon">validate</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#verseatindex" class="tsd-kind-icon">verse<wbr>AtIndex</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>